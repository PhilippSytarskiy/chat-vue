(function(){"use strict";var e={387:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var r=s(998),n=s(6843),a=s(6190),o=s(8271),i=s(4324),u=s(5808),l=s(4525),c=s(8870),f=s(4611),d=s(3059),h=s(6975),m=s(2540),p=function(){var e=this,t=e._self._c;return t(r.Z,[t(h.Z,{attrs:{app:""}},[t(u.Z,{attrs:{subheader:""}},[t(m.Z,[e._v("Пользователи")]),e._l(e.users.users,(function(s){return t(l.Z,{key:s.id},[t(c.km,[t(c.V9)],1),t(f.Z,[t(i.Z,{attrs:{color:s.id===e.user.id?"deep-purple accent-4":"grey"}},[e._v(" mdi-message-outline ")])],1)],1)}))],2)],1),t(n.Z,{attrs:{app:""}},[t(a.Z,{attrs:{color:"mr-6"},on:{click:e.exit}},[t(i.Z,{attrs:{large:"",dark:"",left:""}},[e._v(" mdi-arrow-left ")])],1),t("h1",[e._v("Чат")])],1),t(d.Z,[t("div",{staticClass:"wrap-chat"},[t("div",{ref:"blockMessages",staticClass:"chat-messages"},[e._v(" "+e._s(e.messages)+" "),e._l(e.messages,(function(s){return t("Message",{key:s.text,attrs:{name:s.name,text:s.text,owner:e.user.id===s.id}})}))],2),t("div",{staticClass:"chat-form"},[t("ChatForm")],1)])]),t(o.Z,{attrs:{app:""}})],1)},v=[],g=s(629),Z=function(){var e=this,t=e._self._c;return t("div",["admin"===e.name?t("div",{staticClass:"system"},[t("p",{staticClass:"text-center"},[e._v(e._s(e.text))]),t("hr")]):t("div",{staticClass:"user"},[t("div",{staticClass:"message",class:{owner:e.owner}},[t("strong",[e._v(e._s(e.name))]),t("p",[e._v(e._s(e.text))])])])])},_=[],x={props:{name:String,text:String,owner:{type:Boolean,default:!1}}},b=x,k=s(1001),y=(0,k.Z)(b,Z,_,!1,null,"7b32b053",null),w=y.exports,O=s(1267),C=s(8088),P=function(){var e=this,t=e._self._c;return t(O.Z,{attrs:{xs12:""}},[t(C.Z,{attrs:{label:"Введите сообщение",outlined:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.send.apply(null,arguments)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)},M=[],S={data:()=>({text:""}),methods:{send(){this.$socket.emit("createMessage",{text:this.text,id:this.$store.state.user.id},(e=>{"string"===typeof e?console.error(e):this.text=""}))}}},T=S,$=(0,k.Z)(T,P,M,!1,null,null,null),j=$.exports,E={data:()=>({}),components:{Message:w,ChatForm:j},computed:(0,g.rn)(["user","messages","users"]),methods:{...(0,g.OI)(["clearData"]),exit(){this.$socket.emit("userLeft",this.user.id,(()=>{this.$router.push("/"),this.clearData()}))}},watch:{messages(){setTimeout((()=>{this.$refs.blockMessages.scrollTop=this.$refs.blockMessages.scrollHeight}),0)}}},F=E,I=(0,k.Z)(F,p,v,!1,null,"194b1b8c",null),K=I.exports},8235:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var r=s(6190),n=s(9582),a=s(4886),o=s(3323),i=s(5125),u=s(3059),l=s(8088),c=function(){var e=this,t=e._self._c;return t(u.Z,[t(o.Z,{attrs:{fluid:""}},[t(n.Z,{staticClass:"mx-auto",attrs:{"max-width":"344"}},[t(a.EB,[e._v("Авторизация")]),t(a.ZB,[t(i.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(l.Z,{attrs:{rules:e.nameRules,label:"Имя",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(r.Z,{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.auth}},[e._v(" Войти ")])],1)],1)],1)],1)],1)},f=[],d=s(629),h={data(){return{valid:!0,name:"",nameRules:[e=>!!e||"Имя обязательно"]}},methods:{...(0,d.OI)(["setUser"]),auth(){if(this.$refs.form.validate()){const e={name:this.name};this.$socket.emit("userJoined",e,(t=>{"string"===typeof t||(e.id=t.userId,this.setUser(e),this.$emit("setJoin",!0),this.$router.push("/chat"))}))}}}},m=h,p=s(1001),v=(0,p.Z)(m,c,f,!1,null,null,null),g=v.exports},9965:function(e,t,s){var r=s(144),n=s(998),a=function(){var e=this,t=e._self._c;return t(n.Z,{attrs:{app:"",dark:""}},[t("router-view")],1)},o=[],i=s(8235),u=s(387),l={name:"App",components:{Login:i["default"],Chat:u["default"]},data:()=>({join:!1}),sockets:{connect(){}},methods:{setJoin(e){this.join=e},sendMessage(){this.$socket.emit("createMessage",{text:"FROM_CLIENT"})}}},c=l,f=s(1001),d=(0,f.Z)(c,a,o,!1,null,null,null),h=d.exports,m=s(629);r.ZP.use(m.ZP);var p=new m.ZP.Store({state:{user:{},users:[],messages:[]},getters:{},mutations:{setUser(e,t){e.user=t},clearData(e){e.user={},e.users=[],e.messages=[]},SOCKET_updateUsers(e,t){e.users=t},SOCKET_newMessage(e,t){e.messages.push(t)}},actions:{},modules:{}}),v=s(8345);r.ZP.use(v.Z);const g=[{name:"login",path:"/",component:()=>Promise.resolve().then(s.bind(s,8235))},{name:"chat",path:"/chat",component:()=>Promise.resolve().then(s.bind(s,387))}],Z=new v.Z({mode:"history",routes:g});var _=Z,x=s(8864);r.ZP.use(x.Z);var b=new x.Z({theme:{dark:!0}}),k=s(2445),y=s.n(k),w=s(9367);r.ZP.config.productionTip=!1;const O={path:"",transports:["websocket"]};r.ZP.use(new(y())({debug:!0,connection:(0,w.ZP)("https://chat-serverrrrrrrrr.herokuapp.com",O),vuex:{store:p,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new r.ZP({store:p,router:_,vuetify:b,render:e=>e(h)}).$mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,a){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[u])}))?r.splice(u--,1):(i=!1,a<o&&(o=a));if(i){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,o=r[0],i=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(u)var c=u(s)}for(t&&t(r);l<o.length;l++)a=o[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},r=self["webpackChunkchat_vue"]=self["webpackChunkchat_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(9965)}));r=s.O(r)})();
//# sourceMappingURL=app.0d1f0034.js.map